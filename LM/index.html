<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
</head>
<body>
    <section class="les-reults">
        <div id="results-container"></div>
        <script>
            const resultsContainer = document.getElementById('results-container');
            const resultsDisplay = document.createElement('div');
    
            fetch('electricar.json')
                .then(response => response.json())
                .then(data => {
                    data.models.forEach(model => {
                        const html = `
                            <h2>${model.name}</h2>
                            <p>Prix : ${model.basePrice}€</p>
                            <p>Autonomie supplémentaire : ${data.costPerKm * model.basePrice}km</p>
                            <button id="calculate-button">Calculer</button>
                        `;
                        resultsContainer.appendChild(html);
                    });
                })
                .catch(error => console.error(error));
    
            const calculateButton = document.getElementById('calculate-button');
            calculateButton.addEventListener('click', () => {
                const modelChoice = prompt("Choisissez le modèle de voiture:");
                if (modelChoice) {
                    fetch(`https://electricar.json?models=${encodeURIComponent(modelChoice)}`)
                        .then(response => response.json())
                        .then(data => {
                            const html = `
                                <h2>Calcul du coût</h2>
                                <p>Total : ${(data.models.reduce((acc, model) => acc + model.basePrice * 1 + data.costPerKm * (model.basePrice * 1 + data.costPerKm)), 0)}€</p>
                            `;
                            resultsDisplay.innerHTML = html;
                        })
                        .catch(error => console.error(error));
                }
            });
        </script>
    </section>
    
    <section class="les-reults mobile">
        <div id="results-container-mobile"></div>
        <script>
            const resultsContainerMobile = document.getElementById('results-container-mobile');
            const resultsDisplayMobile = document.createElement('div');
    
            fetch('electricar.json')
                .then(response => response.json())
                .then(data => {
                    data.models.forEach(model => {
                        const html = `
                            <h2>${model.name}</h2>
                            <p>Prix : ${model.basePrice}€</p>
                            <p>Autonomie supplémentaire : ${data.costPerKm * model.basePrice}km</p>
                            <button id="calculate-button-mobile">Calculer</button>
                        `;
                        resultsContainerMobile.appendChild(html);
                    });
                })
                .catch(error => console.error(error));
    
            const calculateButtonMobile = document.getElementById('calculate-button-mobile');
            calculateButtonMobile.addEventListener('click', () => {
                const modelChoice = prompt("Choisissez le modèle de voiture:");
                if (modelChoice) {
                    fetch(`https://electricar.json?models=${encodeURIComponent(modelChoice)}`)
                        .then(response => response.json())
                        .then(data => {
                            const html = `
                                <h2>Calcul du coût</h2>
                                <p>Total : ${(data.models.reduce((acc, model) => acc + model.basePrice * 1 + data.costPerKm * (model.basePrice * 1 + data.costPerKm)), 0)}€</p>
                            `;
                            resultsDisplayMobile.innerHTML = html;
                        })
                        .catch(error => console.error(error));
                }
            });
        </script>
    </section>
    
    <section class="les-reults">
        <div id="results-container"></div>
        <script>
            const resultsContainer = document.getElementById('results-container');
            const resultsDisplay = document.createElement('div');
    
            fetch('electricar.json')
                .then(response => response.json())
                .then(data => {
                    data.models.forEach(model => {
                        const html = `
                            <h2>${model.name}</h2>
                            <p>Prix : ${model.basePrice}€</p>
                            <p>Autonomie supplémentaire : ${data.costPerKm * model.basePrice}km</p>
                        `;
                        resultsContainer.appendChild(html);
                    });
                })
                .catch(error => console.error(error));
    
            const calculateButton = document.createElement('button');
            calculateButton.textContent = 'Calculer';
            calculateButton.addEventListener('click', () => {
                const modelChoice = prompt("Choisissez le modèle de voiture:");
                if (modelChoice) {
                    fetch(`https://electricar.json?models=${encodeURIComponent(modelChoice)}`)
                        .then(response => response.json())
                        .then(data => {
                            const html = `
                                <h2>Calcul du coût</h2>
                                <p>Total : ${(data.models.reduce((acc, model) => acc + model.basePrice * 1 + data.costPerKm * (model.basePrice * 1 + data.costPerKm)), 0)}€</p>
                            `;
                            resultsDisplay.innerHTML = html;
                        })
                        .catch(error => console.error(error));
                }
            });
        </script>
    </section>
    
    <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/fetch-api@2.1.2/dist/fetch-api.min.js"></script>
    
</body>
</html>